{% extends 'base.html' %}
{% load static %}

{% block title %}Listagem de Agricultores | EXTENS√ÉO{% endblock %}

{% block content %}
<section class="content-header">
  <div class="container-fluid">
    <h1><i class="fas fa-tractor text-success"></i> Agricultores</h1>
    <p class="text-muted">Rela√ß√£o de agricultores(as) mapeados pelo projeto.</p>
  </div>
</section>

<section class="content">
  <div class="container-fluid">

    <!-- Cards Resumo (com dados do agricultor) -->
    <div class="row">
      {% for ag in agricultores|slice:":3" %}
      <div class="col-md-4">
        <div class="card border-success shadow-sm mb-4">
          <div class="card-header bg-success text-white">
            <strong><i class="fas fa-seedling"></i> {{ ag.produto_principal }}</strong>
          </div>
          <div class="card-body">
            <p><strong>üéÇ Idade:</strong> {{ ag.idade }} anos</p>
            <p><strong>‚öß Sexo:</strong> {{ ag.sexo }}</p>
            <p><strong>üèò Cidade:</strong> {{ ag.cidade_origem }}</p>
            <p><strong>üè¶ Cr√©dito:</strong> 
              {% if ag.acesso_credito %}
                <span class="badge badge-success">Sim</span>
              {% else %}
                <span class="badge badge-secondary">N√£o</span>
              {% endif %}
            </p>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

    <!-- Tabela Completa -->
    <div class="card card-outline card-success">
      <div class="card-header">
        <h3 class="card-title"><i class="fas fa-list"></i> Lista de Agricultores</h3>
      </div>
      <div class="card-body table-responsive p-0">
        <table class="table table-hover table-striped">
          <thead class="thead-light">
            <tr>
              <th>ID</th>
              <th>Local da Feira</th>
              <th>Data</th>
              <th>Entrevistador</th>
              <th>Produto Principal</th>
              <th>Acesso Cr√©dito</th>
            </tr>
          </thead>
          <tbody>
            {% for ag in agricultores %}
            <tr>
              <td>{{ ag.id }}</td>
              <td>{{ ag.local_feira }}</td>
              <td>{{ ag.data|date:"d/m/Y" }}</td>
              <td>{{ ag.entrevistador }}</td>
              <td>{{ ag.produto_principal }}</td>
              <td>
                {% if ag.acesso_credito %}
                  <span class="badge badge-success">Sim</span>
                {% else %}
                  <span class="badge badge-secondary">N√£o</span>
                {% endif %}
              </td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="6" class="text-center text-muted">Nenhum agricultor cadastrado.</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

  </div>
</section>
{% endblock %}
